import{_ as H,f as C,r as D,d as K,c as n,a as t,g as P,w as i,h as V,F as m,i as p,j as w,k as q,n as U,v,u as Q,m as W,o as r,t as b,l as X}from"./index-BBkAQfZn.js";import{u as Y}from"./caregiverStore-BzssTZa9.js";import{u as Z}from"./AppointmentStore-B5xb3BvQ.js";import"@/assets/main.css";const tt={class:"container"},et={class:"request-form card-section",ref:"requestForm"},st={class:"form-row flex flex-wrap gap-4"},lt={class:"form-group flex-1 min-w-[200px]"},at={class:"flex gap-2"},ot=["value"],it=["disabled"],nt=["value"],rt={class:"form-group min-w-[200px]"},dt={class:"radio-group flex gap-4 items-center"},ut={class:"flex items-center text-base text-gray-700"},mt={class:"flex items-center text-base text-gray-700"},ct={class:"form-row flex flex-wrap gap-4"},pt={class:"form-group flex-1 min-w-[200px]"},vt={class:"form-group min-w-[200px]"},bt={class:"form-row flex flex-wrap gap-4"},xt={class:"form-group flex-1 min-w-[200px]"},ft={class:"form-group min-w-[200px]"},gt={class:"form-group mt-4"},yt={class:"checkbox-group flex flex-wrap gap-2 mt-2"},Tt=["value","onUpdate:modelValue"],Dt={class:"form-group mt-4"},wt=["onUpdate:modelValue"],St=["onUpdate:modelValue"],kt=["onClick"],ht={class:"form-group mt-6"},_t=["disabled"],Ct={class:"services-section card-section"},Vt={class:"service-images"},qt=["src","alt"],Ut={class:"service-list"},Ft={class:"service-category"},It={class:"list-disc pl-5 text-gray-600"},Mt={class:"service-category"},Rt={class:"list-disc pl-5 text-gray-600"},jt={class:"assurance-section"},$t={class:"assurance-items"},Et=["src","alt"],Nt={class:"text-lg font-medium text-gray-700"},Bt={class:"text-base text-gray-600"},At={__name:"SearchCaregiver",setup(Lt){const S=Q(),k=Y(),d=Z(),F=async()=>{const{city:o,district:e,continuous:s,multi:a,timeType:c}=l.value;d.setTime("continuous",s),d.setTime("multi",{multi:a}),d.appointment.timeType=c;const O=s.startDate&&s.startTime&&s.endDate&&s.endTime,z=a.startDate&&a.endDate&&a.startTime&&a.endTime;if(!(O||z)){alert("請填寫連續時間或多時段的預約條件");return}const g=(u,x)=>!u||!x?"":`${u}T${x}`;C(()=>{const{continuous:u,multi:x}=l.value,J=u.startDate&&u.startTime&&u.endDate&&u.endTime,G=x.startDate&&x.endDate&&x.timeSlots.length>0;return(J||G)&&l.value.city&&l.value.district});const f={serviceCity:o,serviceDistrict:l.value.district==="全部區域"||!l.value.district?null:l.value.district,desiredStartTime:c==="continuous"?g(s.startDate,s.startTime):g(a.startDate,a.timeSlots[0].startTime),desiredEndTime:c==="continuous"?g(s.endDate,s.endTime):g(a.endDate,a.timeSlots[a.timeSlots.length-1].endTime),gender:l.value.gender||null,nationality:l.value.nationality||null,languages:l.value.languages||null,hourlyRateMin:l.value.hourlyRateMin||null,hourlyRateMax:l.value.hourlyRateMax||null};if(!f.desiredStartTime||!f.desiredEndTime){alert("請填寫有效的開始時間與結束時間");return}console.log("過濾條件:",f);try{const u=await W.get("/api/appointment/caregiver/available",{params:f});k.setFilters(f),k.setCaregivers(u.data),localStorage.setItem("timeType",d.appointment.timeType),localStorage.setItem("continuousStartDate",d.continuous.startDate),localStorage.setItem("continuousStartTime",d.continuous.startTime),localStorage.setItem("continuousEndDate",d.continuous.endDate),localStorage.setItem("continuousEndTime",d.continuous.endTime),localStorage.setItem("multiStartDate",d.multi.multi.startDate),localStorage.setItem("multiEndDate",d.multi.multi.endDate),localStorage.setItem("multiTimeSlots",JSON.stringify(d.multi.multi.timeSlots)),S.push("/caregivers/list")}catch(u){console.error("搜尋失敗",u),alert("搜尋失敗，請稍後再試")}},I=C(()=>{const{continuous:o,multi:e}=l.value,s=o.startDate&&o.startTime&&o.endDate&&o.endTime,a=e.startDate&&e.endDate&&e.timeSlots.length>0;return(s||a)&&l.value.city&&l.value.district}),M=()=>{const o=document.querySelector(".request-form.card-section");o&&o.scrollIntoView({behavior:"smooth",block:"start"})},R=()=>{S.push("/request/time")},l=D({city:"",district:"",timeType:"continuous",continuous:{startDate:"",startTime:"",endDate:"",endTime:""},multi:{startDate:"",endDate:"",repeatDays:{monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1,sunday:!1},timeSlots:[{startTime:"",endTime:""}]}}),j=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],h={星期一:"monday",星期二:"tuesday",星期三:"wednesday",星期四:"thursday",星期五:"friday",星期六:"saturday",星期日:"sunday"},y=D([]),T=D([]);K(async()=>{try{const o=await fetch("/data/TwCities.json");y.value=await o.json()}catch(o){console.error("Failed to load cities:",o)}l.value.timeType="continuous"});const $=()=>{const o=y.value.find(e=>e.name===l.value.city);o?T.value=["全部區域",...o.districts]:T.value=[],l.value.district=""},_=o=>{l.value.timeType=o},E=()=>{l.value.multi.timeSlots.push({startTime:"",endTime:""})},N=["/images/service1.jpg","/images/service2.jpg","/images/service3.jpg"],B=["代購物品","備餐（限被照顧者及其伴侶）","協助進食、用藥（按醫囑給藥）","環境整理（限被照顧者及其伴侶）、洗衣（限被照顧者）","身心靈陪伴及安全維護","陪同外出或就醫"],A=["協助移位","大小便處理","管路清潔照護","翻身拍背、簡易肢體關節活動","身體清潔","鼻胃管灌食"],L=[{title:"身份與證照審核把關",description:"所有服務者都通過台灣身份證、一年內良民證審核。專業項目須有合法證照才能提供服務。",icon:"/images/person.png"},{title:"真實評價機制",description:"所有服務者的評價均為真實評價，有助於減少風險。",icon:"/images/message.png"},{title:"即時訊息聯繫",description:"立即與服務者交換聯絡方式，或文字討論細節，降低不適任。",icon:"/images/comment.png"}];return(o,e)=>(r(),n(m,null,[e[31]||(e[31]=t("div",{class:"background-image"},null,-1)),t("div",tt,[t("div",{class:"reservation-process card-section"},[e[12]||(e[12]=P('<h2 data-v-fa2cb8b9>輕鬆找到最適合的居家/醫院看護</h2><div class="process-steps" data-v-fa2cb8b9><div class="step" data-v-fa2cb8b9><div class="step-circle" data-v-fa2cb8b9>1</div><div class="step-text" data-v-fa2cb8b9>填寫需求並篩選護理人員</div></div><div class="step-text" data-v-fa2cb8b9>→</div><div class="step" data-v-fa2cb8b9><div class="step-circle" data-v-fa2cb8b9>2</div><div class="step-text" data-v-fa2cb8b9>比較報價・確認評價</div></div><div class="step-text" data-v-fa2cb8b9>→</div><div class="step" data-v-fa2cb8b9><div class="step-circle" data-v-fa2cb8b9>3</div><div class="step-text" data-v-fa2cb8b9>預約最適合的護理人員</div></div></div>',2)),t("div",{class:"process-buttons"},[t("button",{class:"search-btn",onClick:M},"搜尋人選"),t("button",{class:"request-btn",onClick:R},"填寫需求單")])]),t("div",et,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold mb-4"},"馬上搜尋合適的居家/醫院看護",-1)),t("div",st,[t("div",lt,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"服務地區（必填）",-1)),t("div",at,[i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.city=s),onChange:$,class:"flex-1 p-2 border border-teal-600 rounded-md text-sm",required:""},[e[13]||(e[13]=t("option",{value:""},"選擇城市",-1)),(r(!0),n(m,null,p(y.value,s=>(r(),n("option",{key:s.name,value:s.name},b(s.name),9,ot))),128))],544),[[V,l.value.city]]),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.district=s),disabled:!l.value.city,class:"flex-1 p-2 border border-teal-600 rounded-md text-sm"},[e[14]||(e[14]=t("option",{value:""},"選擇區域",-1)),(r(!0),n(m,null,p(T.value,s=>(r(),n("option",{key:s,value:s},b(s),9,nt))),128))],8,it),[[V,l.value.district]])])]),t("div",rt,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"時間類型",-1)),t("div",dt,[t("label",ut,[i(t("input",{type:"radio",name:"time-type",value:"continuous","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.timeType=s),onChange:e[3]||(e[3]=s=>_("continuous")),class:"w-5 h-5 mr-2"},null,544),[[q,l.value.timeType]]),e[16]||(e[16]=w(" 連續時間 "))]),t("label",mt,[i(t("input",{type:"radio",name:"time-type",value:"multi","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.timeType=s),onChange:e[5]||(e[5]=s=>_("multi")),class:"w-5 h-5 mr-2"},null,544),[[q,l.value.timeType]]),e[17]||(e[17]=w(" 多時段預訂 "))])])])]),t("div",{id:"continuous-time",class:U(["time-options mt-4",{block:l.value.timeType==="continuous",hidden:l.value.timeType!=="continuous"}])},[t("div",ct,[t("div",pt,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"服務開始 日期/時間",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=s=>l.value.continuous.startDate=s),class:"w-full p-2 border border-teal-600 rounded-md text-sm mb-2",required:""},null,512),[[v,l.value.continuous.startDate]]),i(t("input",{type:"time","onUpdate:modelValue":e[7]||(e[7]=s=>l.value.continuous.startTime=s),class:"w-full p-2 border border-teal-600 rounded-md text-sm",required:""},null,512),[[v,l.value.continuous.startTime]])]),t("div",vt,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"服務結束 日期/時間",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=s=>l.value.continuous.endDate=s),class:"w-full p-2 border border-teal-600 rounded-md text-sm mb-2",required:""},null,512),[[v,l.value.continuous.endDate]]),i(t("input",{type:"time","onUpdate:modelValue":e[9]||(e[9]=s=>l.value.continuous.endTime=s),class:"w-full p-2 border border-teal-600 rounded-md text-sm",required:""},null,512),[[v,l.value.continuous.endTime]])])])],2),t("div",{id:"multi-time",class:U(["time-options mt-4",{block:l.value.timeType==="multi",hidden:l.value.timeType!=="multi"}])},[t("div",bt,[t("div",xt,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"服務開始 日期",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=s=>l.value.multi.startDate=s),class:"w-full p-2 border border-teal-600 rounded-md text-sm",required:""},null,512),[[v,l.value.multi.startDate]])]),t("div",ft,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"服務結束 日期",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=s=>l.value.multi.endDate=s),class:"w-full p-2 border border-teal-600 rounded-md text-sm",required:""},null,512),[[v,l.value.multi.endDate]])])]),t("div",gt,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"其他設定 *可複選",-1)),t("div",yt,[(r(),n(m,null,p(j,s=>t("label",{key:s,class:"flex items-center text-sm text-gray-700"},[i(t("input",{type:"checkbox",value:s,"true-value":!0,"false-value":!1,"onUpdate:modelValue":a=>l.value.multi.repeatDays[h[s]]=a,class:"mr-2"},null,8,Tt),[[X,l.value.multi.repeatDays[h[s]]]]),w(" "+b(s),1)])),64))])]),t("div",Dt,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-teal-600 mb-1"},"固定每天的時間（幾點到幾點）",-1)),(r(!0),n(m,null,p(l.value.multi.timeSlots,(s,a)=>(r(),n("div",{key:a,class:"time-slot flex gap-2 mt-2"},[i(t("input",{type:"time","onUpdate:modelValue":c=>s.startTime=c,placeholder:"服務開始",class:"flex-1 p-2 border border-teal-600 rounded-md text-sm"},null,8,wt),[[v,s.startTime]]),i(t("input",{type:"time","onUpdate:modelValue":c=>s.endTime=c,placeholder:"服務結束",class:"flex-1 p-2 border border-teal-600 rounded-md text-sm"},null,8,St),[[v,s.endTime]]),t("button",{onClick:c=>l.value.multi.timeSlots.splice(a,1),class:"px-2 py-1 bg-red-500 text-white rounded-md text-sm"}," 移除 ",8,kt)]))),128)),t("div",{class:"add-time-slot mt-2 text-teal-600 underline cursor-pointer",onClick:E}," ＋新增時間 ")])],2),t("div",ht,[t("button",{onClick:F,disabled:!I.value,class:"search-button px-4 py-2 bg-teal-600 text-white rounded-md text-sm font-medium"}," 搜尋人選 ",8,_t)])],512),e[30]||(e[30]=t("div",{class:"intro-section card-section"},[t("h2",{class:"text-2xl font-semibold text-gray-800"},"居家/醫院看護"),t("p",{class:"text-base text-gray-600 max-w-2xl mx-auto"}," 想尋找醫院或居家的短期看護、臨時看護嗎？Care+ 擁有超過數百位的看護，服務時間彈性，可選擇鐘點看護，或是半日 12 小時、全日 24 小時的照顧，服務範圍涵蓋全台，照服員人選自訂、價格透明、評價公開，您可依預算、需求自由挑選。 ")],-1)),t("div",Ct,[e[28]||(e[28]=t("h2",{class:"text-2xl font-semibold text-gray-800"},"服務項目",-1)),t("div",Vt,[(r(),n(m,null,p(N,(s,a)=>t("img",{key:a,src:s,alt:`服務圖片 ${a+1}`,class:"w-[300px] h-[200px] object-cover rounded-lg transition-transform duration-300 hover:scale-105"},null,8,qt)),64))]),t("div",Ut,[t("div",Ft,[e[26]||(e[26]=t("h3",{class:"text-lg font-medium text-gray-700"},"一般服務",-1)),t("ul",It,[(r(),n(m,null,p(B,s=>t("li",{key:s,class:"py-1"},b(s),1)),64))])]),t("div",Mt,[e[27]||(e[27]=t("h3",{class:"text-lg font-medium text-gray-700"},"專業服務",-1)),t("ul",Rt,[(r(),n(m,null,p(A,s=>t("li",{key:s,class:"py-1"},b(s),1)),64))])])])]),t("div",jt,[e[29]||(e[29]=t("h2",{class:"text-2xl font-semibold text-gray-800"},"Care 安心保證",-1)),t("div",$t,[(r(),n(m,null,p(L,s=>t("div",{class:"assurance-item",key:s.title},[t("img",{src:s.icon,alt:`${s.title} 圖標`,class:"w-12 h-12"},null,8,Et),t("div",null,[t("h3",Nt,b(s.title),1),t("p",Bt,b(s.description),1)])])),64))])])])],64))}},Ht=H(At,[["__scopeId","data-v-fa2cb8b9"]]);export{Ht as default};
