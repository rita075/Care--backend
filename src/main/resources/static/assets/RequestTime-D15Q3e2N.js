import{_ as q,r as y,d as w,A as x,f as _,c as m,g as D,a as s,w as o,k as b,n as c,v as l,F as g,i as f,u as $,o as v,j as I,l as R,t as F}from"./index-BBkAQfZn.js";import{u as M}from"./AppointmentStore-B5xb3BvQ.js";import{u as B}from"./caregiverStore-BzssTZa9.js";import"@/assets/main.css";const N={class:"wrapper"},A={class:"container"},j={class:"main-section"},z={class:"card-section"},E={class:"form-item"},L={class:"radio-group"},O={class:"form-row"},G={class:"form-item"},H={class:"form-item"},J={class:"form-row"},K={class:"form-item"},P={class:"form-item"},Q={class:"form-item"},W={class:"checkbox-group"},X=["value"],Y={class:"form-item"},Z=["onUpdate:modelValue"],h=["onUpdate:modelValue"],tt=["onClick"],et=["disabled"],st={__name:"RequestTime",setup(at){const V=x();B();const n=y(null);w(()=>{n.value=V.query.caregiverId,console.log("Caregiver ID from route query:",n.value),n.value&&u.setCaregiverId(n.value)});const e=y({timeType:"continuous",continuous:{startDate:"",startTime:"",endDate:"",endTime:""},multi:{startDate:"",endDate:"",repeatDays:[],timeSlots:[{startTime:"",endTime:""}]}}),k=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],u=M(),S=$(),p=_(()=>{if(e.value.timeType==="continuous")return e.value.continuous.startDate&&e.value.continuous.startTime&&e.value.continuous.endDate&&e.value.continuous.endTime;{const i=e.value.multi.startDate&&e.value.multi.endDate,t=e.value.multi.timeSlots.every(a=>a.startTime&&a.endTime);return i&&t}}),T=i=>{e.value.timeType=i},C=()=>{e.value.multi.timeSlots.push({startTime:"",endTime:""})},U=()=>{if(p.value){if(u.setCaregiverId(n.value),e.value.timeType==="continuous"){const i=`${e.value.continuous.startDate}T${e.value.continuous.startTime}`,t=`${e.value.continuous.endDate}T${e.value.continuous.endTime}`;u.setTime("continuous",{startTime:i,endTime:t})}else{const i={startDate:e.value.multi.startDate,endDate:e.value.multi.endDate,repeatDays:e.value.multi.repeatDays,timeSlots:e.value.multi.timeSlots};u.setTime("multi",i)}S.push("/request/patient")}};return(i,t)=>(v(),m("div",N,[t[22]||(t[22]=D('<div class="progress-bar" data-v-93458944><div class="progress-step active" data-v-93458944><span class="circle" data-v-93458944>1</span> 時間類型 </div><span class="progress-arrow" data-v-93458944>&gt;</span><div class="progress-step" data-v-93458944><span class="circle" data-v-93458944>2</span> 被照顧者資訊 </div><span class="progress-arrow" data-v-93458944>&gt;</span><div class="progress-step" data-v-93458944><span class="circle" data-v-93458944>3</span> 服務地點 </div></div>',1)),s("div",A,[s("div",j,[s("div",z,[t[20]||(t[20]=s("h3",null,"居家/醫院看護需求單",-1)),s("div",E,[t[13]||(t[13]=s("label",null,"時間類型",-1)),s("div",L,[o(s("input",{type:"radio",id:"continuous",name:"time-type",value:"continuous","onUpdate:modelValue":t[0]||(t[0]=a=>e.value.timeType=a),onChange:t[1]||(t[1]=a=>T("continuous"))},null,544),[[b,e.value.timeType]]),t[11]||(t[11]=s("label",{for:"continuous"},"連續時間",-1)),o(s("input",{type:"radio",id:"multi",name:"time-type",value:"multi","onUpdate:modelValue":t[2]||(t[2]=a=>e.value.timeType=a),onChange:t[3]||(t[3]=a=>T("multi"))},null,544),[[b,e.value.timeType]]),t[12]||(t[12]=s("label",{for:"multi"},"多時段預訂",-1))])]),s("div",{id:"continuous-time",class:c(["time-options",{block:e.value.timeType==="continuous",hidden:e.value.timeType!=="continuous"}])},[s("div",O,[s("div",G,[t[14]||(t[14]=s("label",null,"服務開始 日期/時間",-1)),o(s("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=a=>e.value.continuous.startDate=a),required:""},null,512),[[l,e.value.continuous.startDate]]),o(s("input",{type:"time","onUpdate:modelValue":t[5]||(t[5]=a=>e.value.continuous.startTime=a),required:""},null,512),[[l,e.value.continuous.startTime]])]),s("div",H,[t[15]||(t[15]=s("label",null,"服務結束 日期/時間",-1)),o(s("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=a=>e.value.continuous.endDate=a),required:""},null,512),[[l,e.value.continuous.endDate]]),o(s("input",{type:"time","onUpdate:modelValue":t[7]||(t[7]=a=>e.value.continuous.endTime=a),required:""},null,512),[[l,e.value.continuous.endTime]])])])],2),s("div",{id:"multi-time",class:c(["time-options",{block:e.value.timeType==="multi",hidden:e.value.timeType!=="multi"}])},[s("div",J,[s("div",K,[t[16]||(t[16]=s("label",null,"服務開始 日期",-1)),o(s("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=a=>e.value.multi.startDate=a),required:""},null,512),[[l,e.value.multi.startDate]])]),s("div",P,[t[17]||(t[17]=s("label",null,"服務結束 日期",-1)),o(s("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=a=>e.value.multi.endDate=a),required:""},null,512),[[l,e.value.multi.endDate]])])]),s("div",Q,[t[18]||(t[18]=s("label",null,"其他設定 *可複選",-1)),s("div",W,[(v(),m(g,null,f(k,a=>s("label",{key:a,class:"checkbox-item"},[o(s("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[10]||(t[10]=d=>e.value.multi.repeatDays=d)},null,8,X),[[R,e.value.multi.repeatDays]]),I(" "+F(a),1)])),64))])]),s("div",Y,[t[19]||(t[19]=s("label",null,"固定每天的時間（幾點到幾點）",-1)),(v(!0),m(g,null,f(e.value.multi.timeSlots,(a,d)=>(v(),m("div",{key:d,class:"form-row time-slot"},[o(s("input",{type:"time","onUpdate:modelValue":r=>a.startTime=r,placeholder:"服務開始",class:"form-item"},null,8,Z),[[l,a.startTime]]),o(s("input",{type:"time","onUpdate:modelValue":r=>a.endTime=r,placeholder:"服務結束",class:"form-item"},null,8,h),[[l,a.endTime]]),s("button",{onClick:r=>e.value.multi.timeSlots.splice(d,1),class:"remove-btn"}," 移除 ",8,tt)]))),128)),s("div",{class:"add-time-slot",onClick:C},"＋新增時間")])],2),s("button",{class:c(["submit-btn",{disabled:!p.value}]),disabled:!p.value,onClick:U}," 確認並繼續 ",10,et)])]),t[21]||(t[21]=D('<div class="sidebar" data-v-93458944><div class="card-section" data-v-93458944><h3 data-v-93458944>預約流程指南</h3><p style="color:gray;" data-v-93458944>為了保障您的權益並提升媒合效率，平台將以以下步驟協助您預約服務：</p><ol style="margin-top:1rem;" data-v-93458944><li data-v-93458944><strong data-v-93458944>填寫需求單</strong><br data-v-93458944>讓看護能快速了解您的照護需求。</li><li data-v-93458944><strong data-v-93458944>資訊分享</strong><br data-v-93458944>您的預約資訊（不含個人資料）將提供給合適的看護進行初步評估。</li><li data-v-93458944><strong data-v-93458944>進一步聯繫</strong><br data-v-93458944>若看護有意願接案，即可進行合約確認及付款程序。</li></ol></div></div>',1))])]))}},ut=q(st,[["__scopeId","data-v-93458944"]]);export{ut as default};
